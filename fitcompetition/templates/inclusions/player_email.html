{% if user.lackingDetail %}
    <div class="panel panel-info user-details-form">
        <div class="panel-heading">
            <h3 class="panel-title">How can we reach you?</h3>
        </div>
        <div class="panel-body">
            <form id="user_contact_form" role="form">
                <fieldset>
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="inputEmailAddress">Email address</label>
                        <input type="text" class="form-control" name="emailAddress" id="inputEmailAddress" placeholder="Enter email">
                    </div>
                    <div class="form-group">
                        <label for="inputPhoneNumber">Phone Number</label>
                        <input type="text" class="form-control" name="phoneNumber" id="inputPhoneNumber" placeholder="Enter phone number">
                    </div>
                    <button type="submit" class="btn btn-default">Submit</button>
                </fieldset>
            </form>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function (jQuery) {
            jQuery.validator.setDefaults({
                debug: true,
                errorPlacement: function (error, element) {
                    // if the input has a prepend or append element, put the validation msg after the parent div
                    if (element.parent().hasClass('input-prepend') || element.parent().hasClass('input-append')) {
                        error.insertAfter(element.parent());
                        // else just place the validation message immediatly after the input
                    } else {
                        error.insertAfter(element);
                    }
                },
                errorElement: "small", // contain the error msg in a small tag
                wrapper: "div", // wrap the error message and small tag in a div
                highlight: function (element) {
                    $(element).closest('.form-group').addClass('has-error'); // add the Bootstrap error class to the control group
                },
                success: function (element) {
                    $(element).closest('.form-group').removeClass('has-error'); // remove the Boostrap error class from the control group
                }
            });


            $("#user_contact_form").validate({
                rules: {
                    emailAddress: {
                        email: true,
                        required: true
                    },
                    phoneNumber: {
                        phoneUS: true,
                        required: true
                    }
                },
                submitHandler: function(form) {
                    $('.user-details-form').remove();
                    $.post('{% url 'user_details_update' %}', $(form).serialize())
                }
            });
        });
    </script>
{% endif %}